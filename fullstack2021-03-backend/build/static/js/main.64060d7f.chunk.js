(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{41:function(e,n,t){"use strict";t.r(n);var c=t(2),r=t(17),a=t.n(r),o=t(4),u=t(3),i=t(0),l=function(e){var n=e.addPerson,t=e.handleValueChange,c=e.handleNumChange,r=e.newName,a=e.newNum;return Object(i.jsx)("div",{children:Object(i.jsxs)("form",{onSubmit:n,children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{onChange:t,value:r})]}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{onChange:c,value:a})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})})},d=function(e){var n=e.person,t=e.filter,c=e.handleDelete;return n.name.toLowerCase().startsWith(t.toLowerCase())?Object(i.jsx)("div",{children:Object(i.jsxs)("p",{children:[n.name," ",n.number," ",Object(i.jsx)("button",{onClick:c,children:"Delete"},n.name)]},n.name)}):null},s=function(e){return Object(i.jsxs)("div",{children:["filter: ",Object(i.jsx)("input",{onChange:e.onChange})]})},j=t(5),b=t.n(j),f="/api/persons",h={getAll:function(){return b.a.get(f).then((function(e){return e.data}))},create:function(e){return b.a.post(f,e).then((function(e){return e.data}))},remove:function(e){return b.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))},update:function(e,n){return b.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))}},m=function(e){var n=e.msg,t=e.error,c={color:"green",background:"rgb(236, 255, 216)",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10,textAlign:"center"};return null===n&&null===t?null:null!==t?(c=Object(o.a)(Object(o.a)({},c),{},{color:"red",background:"rgb(255, 249, 242)"}),Object(i.jsx)("div",{style:c,children:t})):Object(i.jsx)("div",{style:c,children:n})},O=function(){var e=Object(c.useState)([]),n=Object(u.a)(e,2),t=n[0],r=n[1],a=Object(c.useState)(""),j=Object(u.a)(a,2),b=j[0],f=j[1],O=Object(c.useState)(""),v=Object(u.a)(O,2),p=v[0],g=v[1],x=Object(c.useState)(""),w=Object(u.a)(x,2),C=w[0],y=w[1],S=Object(c.useState)(null),N=Object(u.a)(S,2),k=N[0],A=N[1],D=Object(c.useState)(null),T=Object(u.a)(D,2),P=T[0],B=T[1];Object(c.useEffect)((function(){h.getAll().then((function(e){r(e)}))}),[]);var E=function(e){!function(e,n){if(window.confirm("Do you really want to remove ".concat(n))){h.remove(e);var c=t.filter((function(n){return n.id!==e}));r(c),A("Removed ".concat(n)),setTimeout((function(){A(null)}),5e3)}}(e.id,e.name)};return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(m,{msg:k,error:P}),Object(i.jsx)(s,{onChange:function(e){y(e.target.value)}}),Object(i.jsx)("h2",{children:"Add a new"}),Object(i.jsx)(l,{addPerson:function(e){e.preventDefault();var n=t.filter((function(e){return e.name===b}));if(0!==n.length){if(window.confirm("".concat(b," is already added to phonebook. Want to replace the old number?"))){var c=n[0].id,a=Object(o.a)(Object(o.a)({},n[0]),{},{number:p});h.update(c,a).then((function(e){r(t.map((function(n){return n.id!==c?n:e}))),A("Number of ".concat(a.name," edited")),setTimeout((function(){A(null)}),5e3)})).catch((function(e){B("Information of ".concat(n[0].name," has already been removed from server")),setTimeout((function(){B(null)}),5e3)}))}}else{var u={name:b,number:p};h.create(u).then((function(e){r(t.concat(e)),f(""),g(""),A("Added ".concat(u.name)),setTimeout((function(){A(null)}),5e3)})).catch((function(e){B(e.response.data.error),setTimeout((function(){B(null)}),5e3)}))}},handleValueChange:function(e){f(e.target.value)},handleNumChange:function(e){g(e.target.value)},newName:b,newNum:p}),Object(i.jsx)("h2",{children:"Numbers"}),t.map((function(e){return Object(i.jsx)(d,{person:e,persons:t,filter:C,handleDelete:function(){return E(e)}},e.name)}))]})};a.a.render(Object(i.jsx)(O,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.64060d7f.chunk.js.map